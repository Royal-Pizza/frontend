<div class="ingredient-container">
  <h2>Gestion des ingrÃ©dients</h2>

  <div class="search-box">
    <input
      type="text"
      placeholder="Rechercher un ingrÃ©dient..."
      [ngModel]="searchValue()"
      (ngModelChange)="searchValue.set($event)"
      (input)="onSearchChange()"
    />
  </div>

  @if (hasNoResults()) {
    <button type="button" class="add-button-quick" (click)="addIngredient(searchValue())">
      â• Ajouter "{{ searchValue() }}" Ã  la base de donnÃ©es
    </button>
  }

  <ul class="ingredient-list">
    @for (ingredient of ingredients(); track ingredient.idIngredient || $index) {
      <li class="ingredient-item">
        <input [(ngModel)]="ingredient.nameIngredient" class="edit-input" />

        <div class="actions">
          <button (click)="updateIngredient(ingredient)" title="Enregistrer">ğŸ’¾</button>
          <button (click)="deleteIngredient(ingredient.idIngredient)" title="Supprimer">ğŸ—‘ï¸</button>
        </div>
      </li>
    } @empty {
      @if (searchValue() === '') {
        <li class="ingredient-item">Aucun ingrÃ©dient trouvÃ©.</li>
      }
    }
  </ul>

  <hr />

  <div class="add-manual">
    <h3>Ajouter un nouvel ingrÃ©dient</h3>
    <div class="form-row">
      <input
        type="text"
        placeholder="Nom de l'ingrÃ©dient"
        [ngModel]="newIngredientName()"
        (ngModelChange)="newIngredientName.set($event)"
      />
      <button type="button" (click)="addIngredient()" [disabled]="!newIngredientName()">
        Ajouter
      </button>
    </div>
  </div>
</div>
