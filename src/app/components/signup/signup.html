<div class="form-container signup-container">
  <h2>Inscription</h2>
  <form [formGroup]="signupForm" (ngSubmit)="onSubmit()">

    <!-- Nom -->
    <div class="form-group">
      <label>Nom</label>
      <input type="text" formControlName="name">
    </div>
    <div *ngIf="submitted && f['name'].errors" class="error">
      <small *ngIf="f['name'].errors['required']">Le nom est requis.</small>
      <small *ngIf="f['name'].errors['minlength']">Le nom doit avoir au moins 2 caractères.</small>
    </div>
    
    <!-- Prénom -->
    <div class="form-group">
      <label>Prénom</label>
      <input type="text" formControlName="prenom">
    </div>
    <div *ngIf="submitted && f['prenom'].errors" class="error">
      <small *ngIf="f['prenom'].errors['required']">Le prénom est requis.</small>
      <small *ngIf="f['prenom'].errors['minlength']">Le prénom doit avoir au moins 2 caractères.</small>
    </div>

    <!-- Email -->
    <div class="form-group">
      <label>Email</label>
      <input type="email" formControlName="email">
    </div>
    <div *ngIf="submitted && f['email'].errors" class="error">
      <small *ngIf="f['email'].errors['required']">L'email est requis.</small>
      <small *ngIf="f['email'].errors['email']">Format d'email invalide.</small>
    </div>

    <!-- Mot de passe -->
    <div class="form-group">
      <label>Mot de passe</label>
      <div class="password-wrapper">
        <input [type]="showPassword ? 'text' : 'password'" formControlName="password">
        <span class="toggle-eye" (click)="showPassword = !showPassword">
          {{ showPassword ? '👁️‍🗨️' : '👁️' }}
        </span>
      </div>
    </div>

    <div class="password-criteria">
      <small [class.valid]="passwordLength" [class.invalid]="!passwordLength">Minimum 8 caractères</small>
      <small [class.valid]="passwordHasUpper" [class.invalid]="!passwordHasUpper">Contient une majuscule</small>
      <small [class.valid]="passwordHasLower" [class.invalid]="!passwordHasLower">Contient une minuscule</small>
      <small [class.valid]="passwordHasSpecial" [class.invalid]="!passwordHasSpecial">Contient un caractère spécial
        (!@#$%^&.*)</small>
    </div>



    <div *ngIf="submitted && f['password'].errors" class="error">
      <small *ngIf="f['password'].errors['required']">Le mot de passe est requis.</small>
      <small *ngIf="f['password'].errors['minlength']">Minimum 8 caractères.</small>
    </div>

    <!-- Confirmer mot de passe -->
    <div class="form-group">
      <label>Confirmer MDP</label>
      <div class="password-wrapper">
        <input [type]="showConfirmPassword ? 'text' : 'password'" formControlName="confirmPassword">
        <span class="toggle-eye" (click)="showConfirmPassword = !showConfirmPassword">
          {{ showConfirmPassword ? '👁️‍🗨️' : '👁️' }}
        </span>
      </div>
    </div>
    <div *ngIf="submitted && f['confirmPassword'].errors" class="error">
      <small *ngIf="f['confirmPassword'].errors['required']">Confirmation requise.</small>
    </div>
    <div *ngIf="submitted && signupForm.errors?.['mismatch']" class="error">
      <small>Les mots de passe ne correspondent pas.</small>
    </div>

    <!-- Bouton -->
    <button type="submit">S'inscrire</button>
  </form>
</div>

<!-- Message dynamique après soumission -->
<div *ngIf="submitted" class="submission-message">
  <div *ngIf="successRegister === true" class="success-message">
    🎉 Inscription réussie ! Bienvenue !
  </div>
  <div *ngIf="successRegister === false" class="error-message">
    ❌ Échec de l'inscription : {{ error }}
  </div>
</div>